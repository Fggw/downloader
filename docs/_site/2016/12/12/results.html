<!DOCTYPE html>
<html lang="en-us">
  
  <head>
  <meta charset="UTF-8">
  <title>Optimizing Food Inspections in Chicago</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="/foodinspections/css/normalize.css">
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/foodinspections/css/cayman.css">

    <script type="text/javascript" async
      src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>

</head>

  <body>
    <section class="page-header">
  <h1 class="project-name">Optimizing Food Inspections in Chicago</h1>
  <h2 class="project-tagline">A Final Project for CS109a at Harvard University</h2>
  <a href="http://github.com/fggw/foodinspections/" class="btn">View on GitHub</a>
</section>

    <section class="main-content">
      
      






<center> <a href="/foodinspections/2016/12/12/modeling.html"> &#8592; Modeling</a> | <a href="/foodinspections/2016/12/12/conclusion.html">Conclusion &#8594;</a> </center>



<h1>Model Selection and Results</h1>

<p>Given our objective of the project, we decided to select models, via cross validation, based on a metric 
we call “failure days.”  Failure days represent the aggregated number of days it takes, from the start 
of the first inspection in a given time frame, to inspect (and fail) a health-violating establishment.<br />
For illustration, note the following simple example.  Imagine an inspector is inspecting 10 restaurants 
in the first week of february.  It turns out that 2 of the establishments end up failing while the rest 
pass.  If the inspector inspected the failed establishments on day 2 and day 3 of the week, the failure 
days would be 2 + 3 = 5 failure days.  However, if the inspector inspected the failed establishments on 
day 4 and day 6 of the week, the failure days would be 4 + 6 = 10.  Thus, in this simple case, we would 
select the model that resulted in 5 failure days rather than the one that resulted in 10 failure days.<br />
By choosing the model that minimizes failure days,we get a ranked list that enables inspectors to 
inspect, in a given time frame, establishments likely to fail sooner than ones likely to pass.</p>

<p>One consideration that proved important in the model building process was the following:  one has to 
think about how often inspectors should receive a new list of ranked establishments to inspect.  In 
other words, should inspectors receive a new ranked list of establishments every week, month, or three 
months?  Is there an optimal time interval for which a new list should be generated? These were 
considerations we had to take into account in the model scoring phase of our process.  We ended up not 
picking a regeneration interval for the ranked lists–rather, we just used log loss to rank the entire 
test set at once.  In future projects, it may be telling to test different list regeneration intervals 
to see if our overall results could be improved.</p>

<p>In summary, in the model scoring phase, our models feed lists of probabilities to a log loss 
function–these probabilities represent the likelihood of an establishment to fail based on a set of 
different predictors.  Log loss then scores the models, strongly penalizing cases of low probability of 
failure if the result of the inspection turns out to be actually be a failure. Each inspection in the 
list is then officially assigned a “1” or “0” for “pass” or “fail.” Finally, we use these lists or 
ordered passes and fails to measure the number of failure days (using cross validation) of each model, 
which is the aggregate number of days from the first day of inspections to each failed inspection.</p>

<p>After implementing the processes described above, we found that AdaBoost (with 100 estimators) performed 
with the lowest average number of failure days, at 110 failure days.  This is about 40 failure days 
fewer that the actual order of inspections, which resulted in about 150 fail days. Other models like 
random forest with 45 features and adaboost with 50 estimators also performed well, averaging about 112 
fail days.  In analyzing this result, we were not surprised:  a boosted random forest is intuitive in 
this setting, considering several predictors were highly non-linear in the response.  In fact, looking 
at all of the best-performing models, they were either bagged or boosted tree ensemble methods.</p>

<p>Ultimately, we satisfied the objective we set out to accomplish: we were able to output a ranked list of 
establishments for inspectors to inspect, in order, such that the number of days it takes them to 
inspect a failed establishment is lower on average than if they were randomly inspecting restaurants.<br />
Not only did we beat the baseline random inspection order by about 40 failure days, but we also beat the 
model that the city of chicago implemented.  In fact, they claimed to have improved inspection order by 
7 failure days.  Our model was thus 33 failure days or so better than Chicago’s model. We realize that 
this strong of an improvement is almost too good–this means that there are likely issues hidden in out 
model or over process.</p>



<br>


<center> <a href="/foodinspections/2016/12/12/modeling.html"> &#8592; Modeling</a> | <a href="/foodinspections/2016/12/12/conclusion.html">Conclusion &#8594;</a> </center>






      <footer class="site-footer">
  <span class="site-footer-owner"><a href="http://localhost:4000/foodinspections/">Optimizing Food Inspections in Chicago</a> was created for CS109a by: 
    <ul> 
    
        <li><a href="http://no.website">Luke Farewell</a></li>
    
        <li><a href="http://no.website">Jake Gober</a></li>
    
        <li><a href="http://sa.muel.green">Samuel Green</a></li>
    
        <li><a href="http://no.website">Jeremy Welborn</a></li>
    
    </ul>

  <span class="site-footer-owner">We were advised by <a href="https://github.com/tnames">Taylor Names.
</footer>


    </section>

  </body>
</html>
